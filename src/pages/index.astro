---
import BaseLayout from '@layouts/BaseLayout.astro';
import CourseCard from '@components/CourseCard.astro';
import TwitterEmbed from '@components/TwitterEmbed.astro';
import VideoEmbed from '@components/VideoEmbed.astro';

const featuredCourses = [
  {
    code: 'EE202',
    name: 'Circuit Analysis',
    category: 'Circuits',
    resourceCount: 32,
    description: 'DC and AC circuit analysis techniques'
  },
  {
    code: 'EE301',
    name: 'Electronics I',
    category: 'Electronics',
    resourceCount: 28,
    description: 'Semiconductor devices and basic circuits'
  },
  {
    code: 'EE361',
    name: 'Signals and Systems',
    category: 'Signal Processing',
    resourceCount: 36,
    description: 'Continuous and discrete-time signal analysis'
  },
];

// Hardcoded pinned tweet ID (Twitter API requires paid tier for user lookup)
const pinnedTweetId = '1948458834596692267';

const base = import.meta.env.BASE_URL === '/' ? '' : import.meta.env.BASE_URL.replace(/\/$/, '');
---

<BaseLayout title="Home">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-bg">
      <div class="hero-gradient"></div>
      <div class="hero-grid"></div>
    </div>
    <div class="container hero-content">
      <div class="hero-badge animate-fade-in">
        <span class="badge-icon">ðŸ‘‹</span>
        <span>Hi, I'm AnÄ±l</span>
      </div>
      
      <h1 class="hero-title animate-fade-in-up">
        Sharing My
        <span class="gradient-text-animated">Engineering Journey</span>
        & Notes
      </h1>
      
      <p class="hero-description animate-fade-in-up delay-100">
        I created this platform to share the study materials, exam solutions, and insights 
        that helped me survive and thrive in Electrical & Electronics Engineering. 
        I hope these resources make your journey a little smoother.
      </p>
      
      <div class="hero-cta animate-fade-in-up delay-200">
        <a href={`${base}/courses`} class="btn btn-primary btn-lg">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
          </svg>
          Browse My Notes
        </a>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features section">
    <div class="container">
      <div class="section-header text-center">
        <h2 class="section-title">How I Can Help</h2>
        <p class="section-subtitle">
          Resources I wish I had when I started my degree
        </p>
      </div>
      
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
          </div>
          <h3 class="feature-title">Lecture Notes</h3>
          <p class="feature-description">
            My personal handwritten and digital notes from core courses, organized and searchable.
          </p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="16" y1="13" x2="8" y2="13"></line>
              <line x1="16" y1="17" x2="8" y2="17"></line>
              <line x1="10" y1="9" x2="8" y2="9"></line>
            </svg>
          </div>
          <h3 class="feature-title">Problem Sets</h3>
          <p class="feature-description">
             Step-by-step solutions to common exam questions and textbook problems.
          </p>
        </div>
        
        <div class="feature-card">
          <div class="feature-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
          </div>
          <h3 class="feature-title">Transfer Advice</h3>
          <p class="feature-description">
            Tools to help transfer students match their previous coursework with our curriculum.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Courses Section -->
  <section class="courses-section section-sm">
    <div class="container">
      <div class="section-header">
        <div>
          <h2 class="section-title">Core Subjects</h2>
          <p class="section-subtitle">Key courses that build your engineering foundation</p>
        </div>
        <a href={`${base}/courses`} class="btn btn-secondary">
          View All Notes
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </a>
      </div>
      
      <div class="courses-grid">
        {featuredCourses.map((course) => (
          <CourseCard {...course} isFree={true} />
        ))}
      </div>
    </div>
  </section>

  <!-- Social Section -->
  <section class="social-section section">
    <div class="container">
      <div class="section-header text-center">
        <h2 class="section-title">Beyond the Classroom</h2>
        <p class="section-subtitle">
          Sharing insights on VLSI, industry trends, and student life
        </p>
      </div>
      
      <div class="social-grid">
        <!-- Twitter Feed (Pinned Tweet) -->
        <div class="social-grid__twitter">
          <h3 class="social-col-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
            </svg>
            Latest Updates
          </h3>
          <!-- Pinned Tweet fetched from Twitter API at build time -->
          <div class="pinned-tweet-container">
             <TwitterEmbed 
                id={pinnedTweetId} 
                title="Pinned Update"
                limit={1}
             />
          </div>
        </div>
        
        <!-- Video Content -->
        <div class="social-grid__videos">
          <h3 class="social-col-title" style="display: flex; align-items: center; gap: 0.5rem;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #ef4444;">
               <polygon points="23 7 16 12 23 17 23 7"></polygon>
               <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
            </svg>
            VLSI & Tech Shorts
          </h3>
          <div class="videos-grid">
            <!-- VLSI / ASML Shorts Placeholders -->
             <VideoEmbed 
              platform="youtube" 
              videoId="CjXhQoqk1xM"
              title="ASML Chip Manufacturing Tech"
              aspectRatio="vertical"
            />
            <VideoEmbed 
              platform="youtube" 
              videoId="O-Yt89b6pGk"
              title="VLSI Design Basics"
              aspectRatio="vertical"
            />
          </div>
          <p style="text-align: right; font-size: 0.8rem; margin-top: 0.5rem; color: var(--text-tertiary);">
            <a href="https://youtube.com" target="_blank">Watch more on YouTube &rarr;</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section: Community Focus -->
  <section class="cta-section section">
    <div class="container">
      <div class="cta-card">
        <div class="cta-content">
          <h2 class="cta-title">Let's succeed together</h2>
          <p class="cta-description">
            Whether you're struggling with Circuits or mastering VLSI, you're not alone.
            Explore the notes, use the tools, and feel free to reach out.
          </p>
          <div class="cta-buttons">
            <a href={`${base}/contact`} class="btn btn-primary btn-lg">Get in Touch</a>
            <a href={`${base}/about`} class="btn btn-ghost btn-lg">Read My Story</a>
          </div>
        </div>
        <div class="cta-decoration">
          <div class="cta-circle"></div>
          <div class="cta-circle"></div>
          <div class="cta-circle"></div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Reuse core styles with tweaks for cleaner look */
  .hero { position: relative; min-height: 80vh; display: flex; align-items: center; padding: var(--space-20) 0; }
  .hero-bg { position: absolute; inset: 0; z-index: -1; }
  .hero-gradient { position: absolute; inset: 0; background: var(--gradient-hero); opacity: 0.05; }
  [data-theme="dark"] .hero-gradient { opacity: 0.2; }
  
  .hero-content { text-align: center; max-width: 800px; margin: 0 auto; }
  
  .hero-badge {
    display: inline-flex; align-items: center; gap: var(--space-2); padding: var(--space-2) var(--space-4);
    background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-full);
    font-size: var(--text-sm); font-weight: 500; color: var(--text-secondary); margin-bottom: var(--space-6);
  }
  
  .hero-title { font-size: clamp(2.5rem, 5vw, 4rem); font-weight: 800; line-height: 1.2; margin-bottom: var(--space-6); }
  .hero-description { font-size: var(--text-lg); color: var(--text-secondary); max-width: 650px; margin: 0 auto var(--space-10); line-height: 1.8; }
  
  /* Features */
  .features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-6); }
  .feature-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: var(--radius-xl); padding: var(--space-8); transition: all 0.2s; }
  .feature-card:hover { transform: translateY(-4px); border-color: var(--primary-300); }
  .feature-icon { width: 48px; height: 48px; background: var(--primary-50); color: var(--primary-600); border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; margin-bottom: var(--space-4); }
  [data-theme="dark"] .feature-icon { background: rgba(59, 130, 246, 0.15); color: var(--primary-400); }
  .feature-title { font-size: var(--text-lg); font-weight: 700; margin-bottom: var(--space-2); }
  .feature-description { font-size: var(--text-sm); color: var(--text-secondary); line-height: 1.6; }

  /* Courses */
  .courses-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-6); }
  
  /* Social */
  .social-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-8); }
  .social-col-title { font-size: var(--text-lg); font-weight: 700; margin-bottom: var(--space-4); display: flex; align-items: center; gap: var(--space-2); }
  .videos-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--space-4); }

  /* CTA */
  .cta-card { background: var(--gradient-hero); border-radius: var(--radius-2xl); padding: var(--space-16); text-align: center; position: relative; overflow: hidden; color: white; }
  .cta-content { position: relative; z-index: 1; }
  .cta-title { font-size: var(--text-4xl); font-weight: 800; margin-bottom: var(--space-4); color: white; }
  .cta-description { font-size: var(--text-lg); color: rgba(255,255,255,0.9); max-width: 600px; margin: 0 auto var(--space-8); }
  .cta-buttons { display: flex; justify-content: center; gap: var(--space-4); }
  .cta-card .btn-primary { background: white; color: var(--primary-700); border: none; }
  .cta-card .btn-ghost { color: white; border: 1px solid rgba(255,255,255,0.3); }
  
  .cta-decoration { position: absolute; inset: 0; }
  .cta-circle { position: absolute; background: rgba(255,255,255,0.05); border-radius: 50%; }
  .cta-circle:nth-child(1) { width: 300px; height: 300px; top: -100px; left: -100px; }
  .cta-circle:nth-child(2) { width: 200px; height: 200px; bottom: -50px; right: -50px; }
  
  @media (max-width: 1024px) {
    .features-grid, .courses-grid, .social-grid { grid-template-columns: 1fr; }
    .videos-grid { grid-template-columns: 1fr 1fr; }
  }
  @media (max-width: 640px) {
     .hero-title { font-size: 2.5rem; }
     .videos-grid { grid-template-columns: 1fr; }
     .cta-buttons { flex-direction: column; }
  }
</style>
